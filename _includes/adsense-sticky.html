<!-- Google AdSense Sticky Ad - 320x50 (Bottom) -->
{% if site.adsense.enabled and site.adsense.sticky_ad and site.ad_units.sticky %}
<div class="adsense-sticky-ad" id="sticky-ad-container">
    <button class="sticky-close-btn" onclick="closeStickyAd()">×</button>
    <div class="ad-label">Publicidad</div>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="{{ site.google_ad_client }}"
         data-ad-slot="{{ site.ad_units.sticky }}"
         data-ad-format="horizontal"
         data-full-width-responsive="true"></ins>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>
{% endif %}

<style>
.adsense-sticky-ad {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: white;
    border-top: 1px solid #ddd;
    padding: 10px;
    text-align: center;
    z-index: 1000;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
    max-width: 100%;
}

.sticky-close-btn {
    position: absolute;
    top: 5px;
    right: 10px;
    background: none;
    border: none;
    font-size: 20px;
    cursor: pointer;
    color: #999;
    padding: 0;
    width: 25px;
    height: 25px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.sticky-close-btn:hover {
    color: #333;
}

.adsense-sticky-ad .ad-label {
    font-size: 10px;
    color: #999;
    text-align: center;
    margin-bottom: 3px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.adsense-sticky-ad ins {
    max-width: 320px;
    margin: 0 auto;
    display: block;
}

/* Ocultar en tablets y desktops */
@media (min-width: 769px) {
    .adsense-sticky-ad {
        display: none !important;
    }
}

/* Solo mostrar en móviles */
@media (max-width: 768px) {
    .adsense-sticky-ad {
        display: block;
    }
}
</style>

<script>
function closeStickyAd() {
    const stickyAd = document.getElementById('sticky-ad-container');
    if (stickyAd) {
        stickyAd.style.display = 'none';
        // Guardar preferencia en localStorage
        localStorage.setItem('stickyAdClosed', 'true');
    }
}

// No mostrar si el usuario ya lo cerró antes
window.addEventListener('load', function() {
    if (localStorage.getItem('stickyAdClosed') === 'true') {
        const stickyAd = document.getElementById('sticky-ad-container');
        if (stickyAd) {
            stickyAd.style.display = 'none';
        }
    }
});
</script>