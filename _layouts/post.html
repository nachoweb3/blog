---
layout: default
---

<article class="post">
    <header class="post-header">
        <div class="post-category">
            <span class="category-badge category-{{ page.categories[0] }}">{{ page.categories[0] | upcase }}</span>
        </div>
        <h1 class="post-title">{{ page.title }}</h1>
        <div class="post-meta">
            <time datetime="{{ page.date | date_to_xmlschema }}">
                {{ page.date | date: "%d de %B, %Y" }}
            </time>
            <span class="separator">•</span>
            <span class="reading-time">{{ content | number_of_words | divided_by: 200 }} min de lectura</span>
        </div>
    </header>

    <!-- Reading Progress Bar se añade automáticamente vía JavaScript -->

    <!-- AdSense Header Banner después del título -->
    {% include adsense-header.html %}

    <div class="post-content">
        {{ content }}

        <!-- AdSense In-Article (mitad del contenido) -->
        {% if content contains '<h2>' or content contains '<h3>' %}
            {% assign content_words = content | number_of_words %}
            {% if content_words > 300 %}
                {% include adsense-in-article.html %}
            {% endif %}
        {% endif %}
    </div>

    <!-- AdSense Footer Banner al final del contenido -->
    {% include adsense-banner.html %}

    <footer class="post-footer">
        <div class="post-tags">
            {% if page.tags %}
                <span class="tags-label">Etiquetas:</span>
                {% for tag in page.tags %}
                    <span class="tag">#{{ tag }}</span>
                {% endfor %}
            {% endif %}
        </div>

        <div class="post-share">
            <span class="share-label">Compartir:</span>
            <!-- Los botones de compartir se generan dinámicamente vía JavaScript -->
        </div>
    </footer>
</article>

<!-- Widget de YouTube -->
{% include youtube-widget.html %}

<!-- Contenedor para Posts Relacionados y Widget Lateral -->
<div class="post-sidebar-layout">
    <!-- Posts Relacionados -->
    <section class="related-posts">
        <h2>Artículos relacionados</h2>
        <p class="related-posts-intro">Basado en los tags de este artículo</p>
        <div class="posts-grid">
            {% assign maxRelated = 3 %}
            {% assign minCommonTags = 1 %}
            {% assign maxRelatedCounter = 0 %}

            {% for post in site.posts %}
                {% if post.url != page.url %}
                    {% assign sameTagCount = 0 %}
                    {% for tag in post.tags %}
                        {% if page.tags contains tag %}
                            {% assign sameTagCount = sameTagCount | plus: 1 %}
                        {% endif %}
                    {% endfor %}

                    {% if sameTagCount >= minCommonTags and maxRelatedCounter < maxRelated %}
                        {% include post-card.html post=post %}
                        {% assign maxRelatedCounter = maxRelatedCounter | plus: 1 %}
                    {% endif %}
                {% endif %}
            {% endfor %}
        </div>

        {% if maxRelatedCounter == 0 %}
        <p class="no-related-posts">No hay artículos relacionados disponibles en este momento.</p>
        {% endif %}
    </section>

    <!-- Sidebar con Posts Populares y AdSense -->
    <aside class="post-sidebar">
        {% include adsense-sidebar.html %}
        {% include popular-posts.html %}
        {% include adsense-sidebar.html %}
    </aside>
</div>
